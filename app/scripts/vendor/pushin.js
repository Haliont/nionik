function getElementScale(a){var b=/matrix\([^\)]+\)/.exec(window.getComputedStyle(a)["-webkit-transform"]),c={x:1,y:1};return b&&(b=b[0].replace("matrix(","").replace(")","").split(", "),c.x=parseFloat(b[0]),c.y=parseFloat(b[3])),c}!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();for(var layers=document.getElementsByClassName("layer"),pageHeight=document.body.clientHeight,scaleArray=[],i=0;i<layers.length;i++)scaleArray.push(getElementScale(layers[i]));var dolly=function(a){requestAnimationFrame(function(){for(var b=0;b<layers.length;b++){var c=[];layers[b].getAttribute("data-params")&&(c=layers[b].getAttribute("data-params").split(","));var d=c[0]||0,e=c[1]||pageHeight,f=c[2]||200,g=scaleArray[b].x+(a-d)/f;if(a>=d&&a<=e){layers[b].classList.contains("hide")&&layers[b].classList.remove("hide");var h="scale("+g+")";layers[b].style.webkitTransform=h,layers[b].style.mozTransform=h,layers[b].style.msTransform=h,layers[b].style.oTransform=h,layers[b].style.transform=h}else layers[b].classList.contains("hide")||layers[b].classList.add("hide")}})},scrollPos=0,touchStart=null,scrollEnd=null;window.addEventListener("scroll",function(a){scrollPos=window.pageYOffset,dolly(scrollPos)}),window.addEventListener("touchstart",function(a){touchStart=a.changedTouches[0].screenY}),window.addEventListener("touchmove",function(a){a.preventDefault();var b=a.changedTouches[0].screenY;scrollPos=Math.max(scrollEnd+touchStart-b,0),scrollPos=Math.min(scrollPos,pageHeight-window.innerHeight),dolly(scrollPos)}),window.addEventListener("touchend",function(a){scrollEnd=scrollPos});